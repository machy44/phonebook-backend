{"version":3,"sources":["components/buttons.js","components/Notification.js","components/index.js","services/persons.js","App.js","index.js"],"names":["Button","children","handleClick","onClick","DeleteButton","props","Notification","className","message","Search","value","onChange","Form","onSubmit","title","type","Person","person","name","number","Persons","persons","handleDelete","map","id","Title","BASE_URL","getAll","a","axios","get","request","data","create","newObject","post","response","deletePerson","delete","update","put","App","useState","setPersons","newName","setNewName","phoneNumber","setPhoneNumber","searchTerm","setSearchTerm","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","fetchPersons","personService","resetPersonInputs","resetSuccessMessageTimeout","setTimeout","setupError","filter","toLowerCase","handleAddPerson","e","preventDefault","personExists","find","window","confirm","returnedPerson","updatedPersons","console","log","error","handleDeletePerson","affectedPerson","personsDisplay","includes","target","htmlFor","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a5d71ec9.chunk.js","sourcesContent":["export const Button = ({ children, handleClick }) => {\n  return <button onClick={handleClick}>{children}</button>;\n};\n\nexport const DeleteButton = (props) => {\n  return <Button {...props}>delete</Button>;\n};\n","export const Notification = ({ className, message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className={className}>{message}</div>;\n};\n","import { DeleteButton } from \"./buttons\";\nexport { Notification } from \"./Notification\";\n\nexport const Search = ({ value, onChange }) => {\n  return (\n    <article>\n      <strong>filter shown with</strong>\n      <input value={value} onChange={onChange} />\n    </article>\n  );\n};\n\nexport const Form = ({ onSubmit, children, title }) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <fieldset>\n        <legend>\n          <Title>{title}</Title>\n        </legend>\n        {children}\n      </fieldset>\n      <button type=\"submit\">add</button>\n    </form>\n  );\n};\n\nconst Person = ({ person }) => {\n  return (\n    <>\n      <span>{person.name}</span> <span>{person.number}</span>\n    </>\n  );\n};\n\nexport const Persons = ({ persons, handleDelete }) => {\n  return (\n    <ol>\n      {persons.map((person) => (\n        <li key={person.name}>\n          <Person person={person} />\n          <DeleteButton handleClick={() => handleDelete(person.id)} />\n        </li>\n      ))}\n    </ol>\n  );\n};\n\nexport const Title = ({ children }) => {\n  return <h2>{children}</h2>;\n};\n","import axios from \"axios\";\n\nconst BASE_URL = \"/api/persons\";\n\nconst getAll = async () => {\n  const request = await axios.get(BASE_URL);\n  return request.data;\n};\n\nconst create = async (newObject) => {\n  const response = await axios.post(BASE_URL, newObject);\n  return response.data;\n};\n\nconst deletePerson = async (id) => {\n  const response = await axios.delete(`${BASE_URL}/${id}`);\n  return response.data;\n};\n\nconst update = async (id, data) => {\n  const response = await axios.put(`${BASE_URL}/${id}`, data);\n  return response.data;\n};\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  create,\n  getAll,\n  delete: deletePerson,\n  update,\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Title, Search, Form, Persons, Notification } from \"./components\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    const fetchPersons = async () => {\n      setPersons(await personService.getAll());\n    };\n    fetchPersons();\n  }, []);\n\n  const handleNameChange = (e) => setNewName(e.target.value);\n\n  const handleSearchTermChange = (e) => setSearchTerm(e.target.value);\n\n  const handlePhoneChange = (e) => setPhoneNumber(e.target.value);\n\n  const resetPersonInputs = () => {\n    setNewName(\"\");\n    setPhoneNumber(\"\");\n  };\n\n  const resetSuccessMessageTimeout = () => {\n    setTimeout(() => {\n      setSuccessMessage(null);\n    }, 5000);\n  };\n\n  const setupError = (errorMessage) => {\n    setErrorMessage(errorMessage);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 5000);\n\n    setPersons(\n      persons.filter(\n        (person) => person.name.toLowerCase() !== newName.toLowerCase()\n      )\n    );\n  };\n\n  const handleAddPerson = async (e) => {\n    e.preventDefault();\n    try {\n      const personExists = persons.find(\n        (person) => person.name.toLowerCase() === newName.toLowerCase()\n      );\n      if (personExists) {\n        const result = window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        );\n        if (result === false) return;\n        const returnedPerson = await personService.update(personExists.id, {\n          name: newName,\n          number: phoneNumber,\n        });\n\n        const updatedPersons = persons.map((person) =>\n          person.id === returnedPerson.id\n            ? { ...person, number: returnedPerson.number }\n            : person\n        );\n        setPersons(updatedPersons);\n        resetPersonInputs();\n\n        setSuccessMessage(\n          `Updated number of ${returnedPerson.name} to ${returnedPerson.number}`\n        );\n        resetSuccessMessageTimeout();\n\n        return;\n      }\n\n      const returnedPerson = await personService.create({\n        name: newName,\n        number: phoneNumber,\n      });\n\n      setPersons([...persons, returnedPerson]);\n      resetPersonInputs();\n      setSuccessMessage(`Added ${newName}`);\n      resetSuccessMessageTimeout();\n    } catch (e) {\n      console.log(e);\n      setupError(e.response.data.error);\n    }\n  };\n\n  const handleDeletePerson = async (id) => {\n    const affectedPerson = persons.find((person) => person.id === id);\n    const result = window.confirm(`Delete ${affectedPerson.name} ?`);\n    if (result === false) return;\n    await personService.delete(id);\n    setPersons(persons.filter((person) => person.id !== id));\n  };\n\n  const personsDisplay = searchTerm\n    ? persons.filter((person) =>\n        person.name.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    : persons;\n\n  return (\n    <main>\n      <Title>Phonebook</Title>\n      <Notification message={successMessage} className=\"success\" />\n      <Notification message={errorMessage} className=\"error\" />\n      <Search value={searchTerm} onChange={handleSearchTermChange} />\n      <Form onSubmit={handleAddPerson} title=\"Add New\">\n        <>\n          <label htmlFor=\"name\">name: </label>\n          <input id=\"name\" value={newName} onChange={handleNameChange} />\n          <br />\n          <br />\n          <label htmlFor=\"phone\">phone:</label>\n          <input id=\"phone\" value={phoneNumber} onChange={handlePhoneChange} />\n        </>\n      </Form>\n      <Title>Numbers</Title>\n      <Persons persons={personsDisplay} handleDelete={handleDeletePerson} />\n    </main>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}