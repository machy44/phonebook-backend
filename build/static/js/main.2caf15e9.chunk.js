(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(20),c=n.n(a),u=n(21),s=n(6),o=n(1),i=n.n(o),l=n(4),b=n(5),j=n(0),f=function(e){var t=e.children,n=e.handleClick;return Object(j.jsx)("button",{onClick:n,children:t})},d=function(e){return Object(j.jsx)(f,Object(s.a)(Object(s.a)({},e),{},{children:"delete"}))},p=function(e){var t=e.className,n=e.message;return null===n?null:Object(j.jsx)("div",{className:t,children:n})},h=function(e){var t=e.value,n=e.onChange;return Object(j.jsxs)("article",{children:[Object(j.jsx)("strong",{children:"filter shown with"}),Object(j.jsx)("input",{value:t,onChange:n})]})},O=function(e){var t=e.onSubmit,n=e.children,r=e.title;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("fieldset",{children:[Object(j.jsx)("legend",{children:Object(j.jsx)(v,{children:r})}),n]}),Object(j.jsx)("button",{type:"submit",children:"add"})]})},m=function(e){var t=e.person;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{children:t.name})," ",Object(j.jsx)("span",{children:t.number})]})},x=function(e){var t=e.persons,n=e.handleDelete;return Object(j.jsx)("ol",{children:t.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(m,{person:e}),Object(j.jsx)(d,{handleClick:function(){return n(e.id)}})]},e.name)}))})},v=function(e){var t=e.children;return Object(j.jsx)("h2",{children:t})},w=n(8),k=n.n(w),g="/api/persons",C=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get(g);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post(g,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.delete("".concat(g,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put("".concat(g,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N={create:y,getAll:C,delete:S,update:L},A=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(b.a)(c,2),f=o[0],d=o[1],m=Object(r.useState)(""),w=Object(b.a)(m,2),k=w[0],g=w[1],C=Object(r.useState)(""),y=Object(b.a)(C,2),S=y[0],L=y[1],A=Object(r.useState)(null),D=Object(b.a)(A,2),F=D[0],E=D[1],I=Object(r.useState)(null),J=Object(b.a)(I,2),T=J[0],B=J[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,N.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var P=function(){d(""),g("")},U=function(){setTimeout((function(){E(null)}),5e3)},q=function(e){B("Information of ".concat(e," has already been removed from server")),setTimeout((function(){B(null)}),5e3),a(n.filter((function(t){return t.name.toLowerCase()!==e.toLowerCase()})))},z=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,c,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(r=n.find((function(e){return e.name.toLowerCase()===f.toLowerCase()})))){e.next=16;break}if(!1!==window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,N.update(r.id,{name:f,number:k});case 9:return c=e.sent,o=n.map((function(e){return e.id===c.id?Object(s.a)(Object(s.a)({},e),{},{number:c.number}):e})),a(o),P(),E("Updated number of ".concat(c.name," to ").concat(c.number)),U(),e.abrupt("return");case 16:return e.next=18,N.create({name:f,number:k});case 18:l=e.sent,a([].concat(Object(u.a)(n),[l])),P(),E("Added ".concat(f)),U(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),q(f);case 28:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.find((function(e){return e.id===t})),!1!==window.confirm("Delete ".concat(r.name," ?"))){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,N.delete(t);case 6:a(n.filter((function(e){return e.id!==t})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=S?n.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):n;return Object(j.jsxs)("main",{children:[Object(j.jsx)(v,{children:"Phonebook"}),Object(j.jsx)(p,{message:F,className:"success"}),Object(j.jsx)(p,{message:T,className:"error"}),Object(j.jsx)(h,{value:S,onChange:function(e){return L(e.target.value)}}),Object(j.jsx)(O,{onSubmit:z,title:"Add New",children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{htmlFor:"name",children:"name: "}),Object(j.jsx)("input",{id:"name",value:f,onChange:function(e){return d(e.target.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"phone",children:"phone:"}),Object(j.jsx)("input",{id:"phone",value:k,onChange:function(e){return g(e.target.value)}})]})}),Object(j.jsx)(v,{children:"Numbers"}),Object(j.jsx)(x,{persons:H,handleDelete:G})]})};n(47);c.a.render(Object(j.jsx)(A,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.2caf15e9.chunk.js.map