(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(20),c=n.n(a),u=n(21),s=n(6),o=n(1),i=n.n(o),l=n(4),b=n(5),j=n(0),d=function(e){var t=e.children,n=e.handleClick;return Object(j.jsx)("button",{onClick:n,children:t})},f=function(e){return Object(j.jsx)(d,Object(s.a)(Object(s.a)({},e),{},{children:"delete"}))},p=function(e){var t=e.className,n=e.message;return null===n?null:Object(j.jsx)("div",{className:t,children:n})},h=function(e){var t=e.value,n=e.onChange;return Object(j.jsxs)("article",{children:[Object(j.jsx)("strong",{children:"filter shown with"}),Object(j.jsx)("input",{value:t,onChange:n})]})},O=function(e){var t=e.onSubmit,n=e.children,r=e.title;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("fieldset",{children:[Object(j.jsx)("legend",{children:Object(j.jsx)(v,{children:r})}),n]}),Object(j.jsx)("button",{type:"submit",children:"add"})]})},x=function(e){var t=e.person;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{children:t.name})," ",Object(j.jsx)("span",{children:t.number})]})},m=function(e){var t=e.persons,n=e.handleDelete;return Object(j.jsx)("ol",{children:t.map((function(e){return Object(j.jsxs)("li",{children:[Object(j.jsx)(x,{person:e}),Object(j.jsx)(f,{handleClick:function(){return n(e.id)}})]},e.name)}))})},v=function(e){var t=e.children;return Object(j.jsx)("h2",{children:t})},w=n(8),g=n.n(w),k="/api/persons",C=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(k);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post(k,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat(k,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.put("".concat(k,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N={create:y,getAll:C,delete:S,update:L},A=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(b.a)(c,2),d=o[0],f=o[1],x=Object(r.useState)(""),w=Object(b.a)(x,2),g=w[0],k=w[1],C=Object(r.useState)(""),y=Object(b.a)(C,2),S=y[0],L=y[1],A=Object(r.useState)(null),D=Object(b.a)(A,2),F=D[0],E=D[1],J=Object(r.useState)(null),T=Object(b.a)(J,2),B=T[0],I=T[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,N.getAll();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var P=function(){f(""),k("")},U=function(){setTimeout((function(){E(null)}),5e3)},q=function(e){I(e),setTimeout((function(){I(null)}),5e3),a(n.filter((function(e){return e.name.toLowerCase()!==d.toLowerCase()})))},z=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,c,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!(r=n.find((function(e){return e.name.toLowerCase()===d.toLowerCase()})))){e.next=16;break}if(!1!==window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,N.update(r.id,{name:d,number:g});case 9:return c=e.sent,o=n.map((function(e){return e.id===c.id?Object(s.a)(Object(s.a)({},e),{},{number:c.number}):e})),a(o),P(),E("Updated number of ".concat(c.name," to ").concat(c.number)),U(),e.abrupt("return");case 16:return e.next=18,N.create({name:d,number:g});case 18:l=e.sent,a([].concat(Object(u.a)(n),[l])),P(),E("Added ".concat(d)),U(),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),console.log(e.t0),q(e.t0.response.data.error);case 29:case"end":return e.stop()}}),e,null,[[1,25]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.find((function(e){return e.id===t})),!1!==window.confirm("Delete ".concat(r.name," ?"))){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,N.delete(t);case 6:a(n.filter((function(e){return e.id!==t})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=S?n.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):n;return Object(j.jsxs)("main",{children:[Object(j.jsx)(v,{children:"Phonebook"}),Object(j.jsx)(p,{message:F,className:"success"}),Object(j.jsx)(p,{message:B,className:"error"}),Object(j.jsx)(h,{value:S,onChange:function(e){return L(e.target.value)}}),Object(j.jsx)(O,{onSubmit:z,title:"Add New",children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{htmlFor:"name",children:"name: "}),Object(j.jsx)("input",{id:"name",value:d,onChange:function(e){return f(e.target.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"phone",children:"phone:"}),Object(j.jsx)("input",{id:"phone",value:g,onChange:function(e){return k(e.target.value)}})]})}),Object(j.jsx)(v,{children:"Numbers"}),Object(j.jsx)(m,{persons:H,handleDelete:G})]})};n(47);c.a.render(Object(j.jsx)(A,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.a5d71ec9.chunk.js.map